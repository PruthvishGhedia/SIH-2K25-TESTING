import{c as S,j as e,r as A,u as i,L as _,B as E,C as M,f as p,U as V,a as W,b as q,d as z,F as O,H as Q,e as G,A as J,g as f,h as K}from"./index-bb1089d4.js";const X=S("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Y=S("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),w=({title:s,value:g,icon:t,trend:l,trendValue:a,color:u="blue",className:r="",onClick:m})=>{const o={blue:{bg:"bg-blue-50",icon:"text-blue-600",text:"text-blue-900"},green:{bg:"bg-green-50",icon:"text-green-600",text:"text-green-900"},yellow:{bg:"bg-yellow-50",icon:"text-yellow-600",text:"text-yellow-900"},red:{bg:"bg-red-50",icon:"text-red-600",text:"text-red-900"},purple:{bg:"bg-purple-50",icon:"text-purple-600",text:"text-purple-900"},indigo:{bg:"bg-indigo-50",icon:"text-indigo-600",text:"text-indigo-900"}},h=o[u]||o.blue;return e.jsx("div",{className:`card p-6 ${m?"cursor-pointer hover:shadow-md transition-shadow":""} ${r}`,onClick:m,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 p-3 rounded-lg ${h.bg}`,children:t&&e.jsx(t,{className:`h-6 w-6 ${h.icon}`})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s}),e.jsx("p",{className:`text-2xl font-semibold ${h.text}`,children:g}),l&&a&&e.jsxs("div",{className:"flex items-center mt-1",children:[l==="up"?e.jsx(Y,{className:"h-4 w-4 text-green-500 mr-1"}):e.jsx(X,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:`text-sm ${l==="up"?"text-green-600":"text-red-600"}`,children:a})]})]})]})})},v=({title:s,value:g,subtitle:t,icon:l,color:a="primary",className:u=""})=>{const r={primary:"border-primary-200 bg-primary-50",success:"border-green-200 bg-green-50",warning:"border-yellow-200 bg-yellow-50",danger:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50"},m={primary:"text-primary-600",success:"text-green-600",warning:"text-yellow-600",danger:"text-red-600",info:"text-blue-600"};return e.jsx("div",{className:`card border-l-4 ${r[a]} ${u}`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[l&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx(l,{className:`h-8 w-8 ${m[a]}`})}),e.jsxs("div",{className:l?"ml-4":"",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:s}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:g}),t&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t})]})]})})})},I=()=>{const[s,g]=A.useState({totalStudents:0,totalCourses:0,totalDepartments:0,pendingFees:0,upcomingExams:0,totalHostels:0,totalBooks:0,recentResults:0}),{data:t,loading:l}=i("student"),{data:a,loading:u}=i("course"),{data:r,loading:m}=i("department"),{data:o,loading:h}=i("fees"),{data:b,loading:F}=i("exam"),{data:j,loading:$}=i("hostel"),{data:y,loading:B}=i("library"),{data:N,loading:R}=i("result"),k=l||u||m||h||F||$||B||R;if(A.useEffect(()=>{k||(()=>{var D,C,L;const c=new Date,U=new Date(c.getTime()+7*24*60*60*1e3);g({totalStudents:(t==null?void 0:t.length)||0,totalCourses:(a==null?void 0:a.length)||0,totalDepartments:(r==null?void 0:r.length)||0,pendingFees:((D=o==null?void 0:o.filter(d=>d.status==="Pending"))==null?void 0:D.length)||0,upcomingExams:((C=b==null?void 0:b.filter(d=>{const x=new Date(d.exam_date);return x>=c&&x<=U}))==null?void 0:C.length)||0,totalHostels:(j==null?void 0:j.length)||0,totalBooks:(y==null?void 0:y.reduce((d,x)=>d+(x.available_copies||0),0))||0,recentResults:((L=N==null?void 0:N.filter(d=>{const x=new Date(d.created_date),P=new Date(c.getTime()-30*24*60*60*1e3);return x>=P}))==null?void 0:L.length)||0})})()},[t,a,r,o,b,j,y,N,k]),k)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(_,{size:"lg",text:"Loading dashboard..."})});const T=[{label:"Add Student",href:"/students/new",color:"primary"},{label:"Create Course",href:"/courses/new",color:"success"},{label:"Add Department",href:"/departments/new",color:"warning"},{label:"Manage Users",href:"/users",color:"info"}],H=[{action:"New student enrolled",time:"2 hours ago",type:"success"},{action:"Fee payment received",time:"4 hours ago",type:"info"},{action:"Exam scheduled",time:"6 hours ago",type:"warning"},{action:"Book issued",time:"8 hours ago",type:"info"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Dashboard"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Welcome back! Here's what's happening in your ERP system."})]}),e.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:e.jsxs(E,{variant:"primary",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"View Calendar"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(w,{title:"Total Students",value:p.formatNumber(s.totalStudents),icon:V,color:"blue",onClick:()=>window.location.href="/students"}),e.jsx(w,{title:"Active Courses",value:p.formatNumber(s.totalCourses),icon:W,color:"green",onClick:()=>window.location.href="/courses"}),e.jsx(w,{title:"Departments",value:p.formatNumber(s.totalDepartments),icon:q,color:"purple",onClick:()=>window.location.href="/departments"}),e.jsx(w,{title:"Pending Fees",value:p.formatNumber(s.pendingFees),icon:z,color:"red",onClick:()=>window.location.href="/fees"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(v,{title:"Upcoming Exams",value:s.upcomingExams,subtitle:"Next 7 days",icon:O,color:"warning"}),e.jsx(v,{title:"Total Hostels",value:s.totalHostels,subtitle:"Accommodation",icon:Q,color:"info"}),e.jsx(v,{title:"Library Books",value:p.formatNumber(s.totalBooks),subtitle:"Available copies",icon:G,color:"success"}),e.jsx(v,{title:"Recent Results",value:s.recentResults,subtitle:"Last 30 days",icon:J,color:"primary"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map((n,c)=>e.jsx(f,{to:n.href,children:e.jsx(E,{variant:"outline",className:"w-full justify-center",children:n.label})},c))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:H.map((n,c)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full ${n.type==="success"?"bg-green-400":n.type==="warning"?"bg-yellow-400":"bg-blue-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:n.action}),e.jsx("p",{className:"text-xs text-gray-500",children:n.time})]})]},c))}),e.jsx("div",{className:"mt-4",children:e.jsx(f,{to:"/activity",className:"text-sm text-primary-600 hover:text-primary-500",children:"View all activity →"})})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(K,{className:"h-5 w-5 text-yellow-400 mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Alerts"})]}),e.jsxs("div",{className:"space-y-3",children:[s.pendingFees>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:s.pendingFees})," students have pending fee payments.",e.jsx(f,{to:"/fees",className:"ml-2 text-yellow-600 hover:text-yellow-500 underline",children:"Review fees →"})]})}),s.upcomingExams>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:s.upcomingExams})," exams are scheduled for the next 7 days.",e.jsx(f,{to:"/exams",className:"ml-2 text-blue-600 hover:text-blue-500 underline",children:"View schedule →"})]})}),s.pendingFees===0&&s.upcomingExams===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No alerts at this time."})]})]})]})};export{I as default};
