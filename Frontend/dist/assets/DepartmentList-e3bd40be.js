import{i as I,u as q,k as O,r,l as $,j as e,L as R,B as s,D as G,g as j,P as H,E as J,S as K,T as g,m as Q,n as U,M as f,o as V,p as W,q as X}from"./index-bb1089d4.js";const Z=()=>{var p;const{actions:d}=I(),{data:y,loading:D,error:o,refetch:m}=q("department"),{remove:N,loading:x}=O("department"),[t,v]=r.useState([]),[c,n]=r.useState({open:!1,department:null}),[w,l]=r.useState(!1),{data:C,currentPage:S,totalPages:k,totalItems:b,pageSize:P,searchTerm:i,handlePageChange:z,handlePageSizeChange:M,handleSearch:h,handleSort:E,sortField:_,sortDirection:A}=$(y||[],10),T=["dept_name","dept_id"];r.useEffect(()=>{h(i,T)},[i]);const L=async u=>{const a=await N(u.dept_id);a.success?(d.showSuccess("Department deleted successfully"),m(),n({open:!1,department:null})):d.showError(a.error||"Failed to delete department")},B=async()=>{l(!1),v([]),d.showSuccess(`${t.length} departments deleted successfully`)},F=[{key:"dept_id",label:"Department ID",sortable:!0},{key:"dept_name",label:"Department Name",sortable:!0},{key:"actions",label:"Actions",render:(u,a)=>e.jsxs(V,{children:[e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>{},children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(j,{to:`/departments/${a.dept_id}/edit`,children:e.jsx(s,{variant:"ghost",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>n({open:!0,department:a}),className:"text-red-600 hover:text-red-700",children:e.jsx(g,{className:"h-4 w-4"})})]})}];return D?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(R,{size:"lg",text:"Loading departments..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Departments"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage academic departments and organizational units"})]}),e.jsxs("div",{className:"mt-4 flex space-x-3 md:mt-0 md:ml-4",children:[e.jsxs(s,{variant:"outline",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsx(j,{to:"/departments/new",children:e.jsxs(s,{variant:"primary",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Department"]})})]})]}),o&&e.jsx(J,{message:o,onClose:()=>m()}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsx(K,{placeholder:"Search departments by name or ID...",value:i,onChange:h,className:"sm:max-w-xs"}),t.length>0&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[t.length," selected"]}),e.jsxs(s,{variant:"danger",size:"sm",onClick:()=>l(!0),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Delete Selected"]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx(Q,{columns:F,data:C,sortField:_,sortDirection:A,onSort:E,emptyMessage:"No departments found"}),e.jsx(U,{currentPage:S,totalPages:k,totalItems:b,pageSize:P,onPageChange:z,onPageSizeChange:M})]}),e.jsx(f,{isOpen:c.open,onClose:()=>n({open:!1,department:null}),title:"Delete Department",footer:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(s,{variant:"outline",onClick:()=>n({open:!1,department:null}),children:"Cancel"}),e.jsx(s,{variant:"danger",loading:x,onClick:()=>L(c.department),children:"Delete"})]}),children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete"," ",e.jsx("strong",{children:(p=c.department)==null?void 0:p.dept_name}),"? This action cannot be undone and may affect related courses and students."]})}),e.jsx(f,{isOpen:w,onClose:()=>l(!1),title:"Delete Multiple Departments",footer:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(s,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsxs(s,{variant:"danger",loading:x,onClick:B,children:["Delete ",t.length," Departments"]})]}),children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete ",t.length," selected departments? This action cannot be undone and may affect related courses and students."]})})]})};export{Z as default};
