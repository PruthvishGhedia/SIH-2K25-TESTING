import{s as F,t as L,i as A,u as h,k as q,v as k,r as z,j as e,L as B,B as d,w as I,E as j,I as D,x as P,y as R,z as l}from"./index-bb1089d4.js";const G=()=>{const i=F(),{id:o}=L(),s=!!o,{actions:n}=A(),{data:t,loading:g,error:u}=h("course",o),{data:c}=h("department"),{create:f,update:v,loading:y,error:m}=q("course"),C={course_name:[l.required,l.maxLength(100)],department_id:[l.required]},{values:U,errors:V,isSubmitting:N,isValid:b,isDirty:w,handleSubmit:E,setFormValues:x,getFieldProps:p}=k({course_name:"",department_id:""},C);z.useEffect(()=>{s&&t&&x({course_name:t.course_name||"",department_id:t.department_id||""})},[s,t,x]);const _=async r=>{try{let a;s?a=await v(o,r):a=await f(r),a.success?(n.showSuccess(s?"Course updated successfully":"Course created successfully"),i("/courses")):n.showError(a.error||"Failed to save course")}catch{n.showError("An unexpected error occurred")}},S=(c==null?void 0:c.map(r=>({value:r.dept_id,label:r.dept_name})))||[];return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(B,{size:"lg",text:"Loading course..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"md:flex md:items-center md:justify-between",children:e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>i("/courses"),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:s?"Edit Course":"Add New Course"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s?"Update course information":"Create a new course offering"})]})]})})}),u&&e.jsx(j,{message:u}),m&&e.jsx(j,{message:m}),e.jsx("form",{onSubmit:r=>{r.preventDefault(),E(_)},children:e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Course Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsx(D,{label:"Course Name",required:!0,placeholder:"Enter course name",...p("course_name")}),e.jsx(P,{label:"Department",required:!0,options:S,placeholder:"Select a department",...p("department_id")})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>i("/courses"),children:"Cancel"}),e.jsxs(d,{type:"submit",variant:"primary",loading:N||y,disabled:!b||!w&&s,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),s?"Update Course":"Create Course"]})]})]})})]})};export{G as default};
