import{s as D,t as C,i as F,u as L,k as S,v as A,r as _,j as e,L as k,B as m,w as z,E as p,I as B,y as I,z as x}from"./index-bb1089d4.js";const U=()=>{const r=D(),{id:n}=C(),t=!!n,{actions:i}=F(),{data:d,loading:u,error:c}=L("department",n),{create:h,update:j,loading:g,error:l}=S("department"),f={dept_name:[x.required,x.maxLength(100)]},{values:q,errors:P,isSubmitting:v,isValid:y,isDirty:N,handleSubmit:b,setFormValues:o,getFieldProps:w}=A({dept_name:""},f);_.useEffect(()=>{t&&d&&o({dept_name:d.dept_name||""})},[t,d,o]);const E=async a=>{try{let s;t?s=await j(n,a):s=await h(a),s.success?(i.showSuccess(t?"Department updated successfully":"Department created successfully"),r("/departments")):i.showError(s.error||"Failed to save department")}catch{i.showError("An unexpected error occurred")}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(k,{size:"lg",text:"Loading department..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"md:flex md:items-center md:justify-between",children:e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>r("/departments"),children:e.jsx(z,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:t?"Edit Department":"Add New Department"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t?"Update department information":"Create a new academic department"})]})]})})}),c&&e.jsx(p,{message:c}),l&&e.jsx(p,{message:l}),e.jsx("form",{onSubmit:a=>{a.preventDefault(),b(E)},children:e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Department Information"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(B,{label:"Department Name",required:!0,placeholder:"Enter department name",...w("dept_name")})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>r("/departments"),children:"Cancel"}),e.jsxs(m,{type:"submit",variant:"primary",loading:v||g,disabled:!y||!N&&t,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),t?"Update Department":"Create Department"]})]})]})})]})};export{U as default};
