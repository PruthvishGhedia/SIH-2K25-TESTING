import{i as I,u as q,k as O,r as c,l as $,j as e,L as G,B as s,D as J,g,P as V,E as H,S as K,T as f,m as Q,n as W,M as p,G as X,o as Y,p as Z,J as ee,q as se}from"./index-bb1089d4.js";const te=()=>{var j;const{actions:i}=I(),{data:y,loading:v,error:u,refetch:m}=q("user"),{remove:N,loading:x}=O("user"),[t,w]=c.useState([]),[o,r]=c.useState({open:!1,user:null}),[k,n]=c.useState(!1),{data:S,currentPage:C,totalPages:b,totalItems:D,pageSize:U,searchTerm:d,handlePageChange:P,handlePageSizeChange:z,handleSearch:h,handleSort:E,sortField:M,sortDirection:A}=$(y||[],10),T=["username","email","user_id"];c.useEffect(()=>{h(d,T)},[d]);const B=async a=>{const l=await N(a.user_id);l.success?(i.showSuccess("User deleted successfully"),m(),r({open:!1,user:null})):i.showError(l.error||"Failed to delete user")},L=async()=>{n(!1),w([]),i.showSuccess(`${t.length} users deleted successfully`)},_=a=>{switch(a){case"1":return"error";case"2":return"warning";case"3":return"info";default:return"default"}},F=a=>{switch(a){case"1":return"Admin";case"2":return"Teacher";case"3":return"Student";default:return"Unknown"}},R=[{key:"user_id",label:"User ID",sortable:!0},{key:"username",label:"Username",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role_id",label:"Role",sortable:!0,render:a=>e.jsx(X,{status:F(a),variant:_(a)})},{key:"actions",label:"Actions",render:(a,l)=>e.jsxs(Y,{children:[e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>{},children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>{},children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(g,{to:`/users/${l.user_id}/edit`,children:e.jsx(s,{variant:"ghost",size:"sm",children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>r({open:!0,user:l}),className:"text-red-600 hover:text-red-700",children:e.jsx(f,{className:"h-4 w-4"})})]})}];return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(G,{size:"lg",text:"Loading users..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Users"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage system users and access permissions"})]}),e.jsxs("div",{className:"mt-4 flex space-x-3 md:mt-0 md:ml-4",children:[e.jsxs(s,{variant:"outline",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsx(g,{to:"/users/new",children:e.jsxs(s,{variant:"primary",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add User"]})})]})]}),u&&e.jsx(H,{message:u,onClose:()=>m()}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsx(K,{placeholder:"Search users by username, email, or ID...",value:d,onChange:h,className:"sm:max-w-xs"}),t.length>0&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[t.length," selected"]}),e.jsxs(s,{variant:"danger",size:"sm",onClick:()=>n(!0),children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Delete Selected"]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsx(Q,{columns:R,data:S,sortField:M,sortDirection:A,onSort:E,emptyMessage:"No users found"}),e.jsx(W,{currentPage:C,totalPages:b,totalItems:D,pageSize:U,onPageChange:P,onPageSizeChange:z})]}),e.jsx(p,{isOpen:o.open,onClose:()=>r({open:!1,user:null}),title:"Delete User",footer:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(s,{variant:"outline",onClick:()=>r({open:!1,user:null}),children:"Cancel"}),e.jsx(s,{variant:"danger",loading:x,onClick:()=>B(o.user),children:"Delete"})]}),children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete user"," ",e.jsx("strong",{children:(j=o.user)==null?void 0:j.username}),"? This action cannot be undone and will revoke all access permissions."]})}),e.jsx(p,{isOpen:k,onClose:()=>n(!1),title:"Delete Multiple Users",footer:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(s,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(s,{variant:"danger",loading:x,onClick:L,children:["Delete ",t.length," Users"]})]}),children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Are you sure you want to delete ",t.length," selected users? This action cannot be undone and will revoke all access permissions."]})})]})};export{te as default};
